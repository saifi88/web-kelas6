<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <title>Ujian Berlangsung - SDN 3 Wonorejo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Style utama -->
  <link rel="stylesheet" href="style.css" />

  <!-- MathJax konfigurasi: gunakan delimiter \( \) untuk inline TeX -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(','\\)'], ['$', '$']],
        packages: {'[+]': ['ams']}
      },
      startup: {
        typeset: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body data-page="ujian">
  <div class="page-wrapper">
    <header class="topbar">
      <div class="brand">
        <img src="https://i.imgur.com/uUdD70n.png" alt="Logo SDN 3 Wonorejo" class="logo" />
        <div class="brand-text">
          <h1>SDN 3 Wonorejo</h1>
          <p>Asesmen Sumatif Akhir Semester &mdash; Kec. Banyuputih, Kab. Situbondo</p>
        </div>
      </div>

      <div class="topbar-right exam-topbar-right">
        <div class="exam-timer">
          <span>Sisa Waktu</span>
          <strong id="timer-display">60:00</strong>
        </div>

        <div class="exam-progress">
          <div class="progress-label">
            Progres Soal: <span id="progress-text">0 / 0</span>
          </div>
          <div class="progress-bar">
            <div id="progress-bar-fill"></div>
          </div>
        </div>
      </div>
    </header>

    <main class="main-content">
      <section class="card exam-card">
        <header class="exam-header">
          <div class="exam-meta">
            <p id="student-info" class="student-info">
              <!-- Diisi dari script.js -->
            </p>
            <p class="exam-instruction">
              Kerjakan soal dengan teliti. Gunakan tombol <strong>Sebelumnya</strong> dan
              <strong>Berikutnya</strong> untuk berpindah soal. Jangan menutup halaman sebelum
              menekan <strong>Kirim Jawaban</strong> atau waktu habis.
            </p>
          </div>
        </header>

        <div id="loading-questions" class="loading">Memuat soal dari database...</div>

        <div id="exam-content" class="hidden">
          <div class="question-area">
            <div class="question-header">
              <span id="question-number" class="question-number">Soal 1</span>
            </div>

            <!-- STIMULUS (teks + gambar) -->
            <div id="stimulus" class="stimulus hidden" aria-live="polite">
              <div id="stimulus-text" class="stimulus-text"></div>

              <div id="stimulus-img-wrap" class="stimulus-img-wrap hidden" aria-hidden="true">
                <img id="stimulus-image" class="stimulus-image" alt="Stimulus soal" loading="lazy" />
                <p id="stimulus-image-error" class="note small hidden">
                  Gagal memuat gambar stimulus.
                </p>
              </div>
            </div>

            <!-- TEKS SOAL -->
            <div id="question-text" class="question-text">
              <!-- diisi oleh script.js -->
            </div>

            <!-- OPSI -->
            <div id="options-container" class="options-container"></div>

            <div class="exam-navigation">
              <button id="prev-btn" class="btn-secondary" type="button">Sebelumnya</button>
              <button id="next-btn" class="btn-secondary" type="button">Berikutnya</button>
              <button id="submit-btn" class="btn-primary" type="button">Kirim Jawaban</button>
            </div>
          </div>

          <aside class="sidebar">
            <div class="question-overview card-mini">
              <h4>Daftar Soal</h4>
              <p class="note small">
                Klik nomor untuk lompat ke soal tertentu. Soal yang sudah dijawab akan
                ditandai warna ungu.
              </p>
              <div id="question-grid" class="question-grid"></div>
            </div>
          </aside>
        </div>
      </section>

      <div id="message-area" class="message-area"></div>

      <!-- MODAL RINGKASAN JAWABAN (opsional) -->
      <div id="summary-modal" class="modal-backdrop hidden">
        <div class="modal-box">
          <h3>Ringkasan Jawaban</h3>
          <p id="summary-info" class="summary-info"></p>
          <p id="summary-unanswered" class="summary-unanswered"></p>
          <div class="modal-actions">
            <button id="summary-cancel" type="button" class="btn-secondary">Kembali mengerjakan</button>
            <button id="summary-confirm" type="button" class="btn-primary">Yakin kirim sekarang</button>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <span>Â© <span id="year"></span> Tim IT SDN 3 Wonorejo &mdash; Sistem Ujian Online</span>
    </footer>
  </div>

  <!-- Tahun -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const y = document.getElementById("year");
      if (y) y.textContent = new Date().getFullYear();
    });
  </script>
  <script src="script.js"></script>
</body>
</html>
